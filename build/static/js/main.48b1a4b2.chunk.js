(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(38)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(5),c=a.n(i),l=a(2),o=a(8),s=a(15),u=a(18),m=a(16),d=a(17),f=(a(29),a(19)),E=(a(30),a(31),Object(l.b)(function(){return{}},function(e){return{cityToFormSelected:function(t){return e(function(e){return{type:"CITY_TO_FORM_SELECTED",cityToId:e.target.value}}(t))},cityFromFormSelected:function(t){return e(function(e){return{type:"CITY_FROM_FORM_SELECTED",cityFromId:e.target.value}}(t))}}})(function(e){var t=e.cityToFormSelected,a=e.cityFromFormSelected;return r.a.createElement("div",{className:"city-select"},r.a.createElement("span",{className:"city-select-from"},r.a.createElement("div",{className:"city-select-text"},"\u041e\u0442\u043a\u0443\u0434\u0430"),r.a.createElement("select",{className:"custom-select custom-select-lg mb-3 city-from",onChange:a,defaultValue:"DEFAULT"},r.a.createElement("option",{value:"DEFAULT",disabled:!0},"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"),r.a.createElement("option",{value:"1"},"\u041c\u043e\u0441\u043a\u0432\u0430"),r.a.createElement("option",{value:"2"},"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"),r.a.createElement("option",{value:"3"},"\u041f\u0430\u0440\u0438\u0436"),r.a.createElement("option",{value:"4"},"\u041b\u043e\u043d\u0434\u043e\u043d"),r.a.createElement("option",{value:"5"},"\u0412\u0430\u0448\u0438\u043d\u0433\u0442\u043e\u043d"),r.a.createElement("option",{value:"6"},"\u041e\u0442\u0442\u0430\u0432\u0430"))),r.a.createElement("span",{className:"city-select-to"},r.a.createElement("div",{className:"city-select-text"},"\u041a\u0443\u0434\u0430"),r.a.createElement("select",{className:"custom-select custom-select-lg mb-3 city-to",onChange:t,defaultValue:"DEFAULT"},r.a.createElement("option",{value:"DEFAULT",disabled:!0},"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"),r.a.createElement("option",{value:"1"},"\u041c\u043e\u0441\u043a\u0432\u0430"),r.a.createElement("option",{value:"2"},"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"),r.a.createElement("option",{value:"3"},"\u041f\u0430\u0440\u0438\u0436"),r.a.createElement("option",{value:"4"},"\u041b\u043e\u043d\u0434\u043e\u043d"),r.a.createElement("option",{value:"5"},"\u0412\u0430\u0448\u0438\u043d\u0433\u0442\u043e\u043d"),r.a.createElement("option",{value:"6"},"\u041e\u0442\u0442\u0430\u0432\u0430"))))})),g=(a(32),Object(l.b)(function(e){return{weight:e.filter.weight}},function(e){return{baggageWeightInc:function(){return e({type:"BAGGAGE_WEIGHT_INC"})},baggageWeightDec:function(){return e({type:"BAGGAGE_WEIGHT_DEC"})}}})(function(e){var t=e.weight,a=e.baggageWeightInc,n=e.baggageWeightDec;return r.a.createElement("div",{className:"baggage-weight"},r.a.createElement("div",{className:"baggage-weight-text"},"\u0411\u0430\u0433\u0430\u0436 (\u043a\u0433)"),r.a.createElement("i",{className:"fa fa-plus-circle",onClick:a}),r.a.createElement("span",{className:"baggage-weight-kilo"},t),r.a.createElement("i",{className:"fa fa-minus-circle",onClick:n}))})),k=function e(){var t=this;Object(o.a)(this,e),this._tickets=[{id:1,from:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",to:"\u041c\u043e\u0441\u043a\u0432\u0430",time_departure:"20-05-2018 8:20",time_arrival:"20-05-2018 9:20",price:4e4,laggage_max:5,duration:3},{id:2,from:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",to:"\u041c\u043e\u0441\u043a\u0432\u0430",time_departure:"21-05-2018 9:20",time_arrival:"21-05-2018 10:20",price:5e4,laggage_max:8,duration:3},{id:3,from:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",to:"\u041c\u043e\u0441\u043a\u0432\u0430",time_departure:"22-05-2018 9:20",time_arrival:"22-05-2018 10:20",price:6e4,laggage_max:12,duration:3},{id:4,from:"\u041f\u0430\u0440\u0438\u0436",to:"\u041b\u043e\u043d\u0434\u043e\u043d",time_departure:"22-05-2018 9:20",time_arrival:"22-05-2018 17:20",price:6e4,laggage_max:12,duration:8},{id:5,from:"\u041f\u0430\u0440\u0438\u0436",to:"\u041b\u043e\u043d\u0434\u043e\u043d",time_departure:"22-05-2018 9:20",time_arrival:"22-05-2018 17:20",price:2e4,laggage_max:4,duration:8},{id:6,from:"\u041f\u0430\u0440\u0438\u0436",to:"\u041b\u043e\u043d\u0434\u043e\u043d",time_departure:"10-05-2018 9:20",time_arrival:"10-05-2018 17:20",price:65e3,laggage_max:6,duration:8},{id:7,from:"\u0412\u0430\u0448\u0438\u043d\u0433\u0442\u043e\u043d",to:"\u041e\u0442\u0442\u0430\u0432\u0430",time_departure:"22-05-2018 9:20",time_arrival:"22-05-2018 17:20",price:6e4,laggage_max:5,duration:15},{id:8,from:"\u0412\u0430\u0448\u0438\u043d\u0433\u0442\u043e\u043d",to:"\u041e\u0442\u0442\u0430\u0432\u0430",time_departure:"10-05-2018 9:20",time_arrival:"10-05-2018 17:20",price:5e4,laggage_max:5,duration:16},{id:9,from:"\u0412\u0430\u0448\u0438\u043d\u0433\u0442\u043e\u043d",to:"\u041e\u0442\u0442\u0430\u0432\u0430",time_departure:"22-05-2018 9:20",time_arrival:"22-05-2018 17:20",price:9e4,laggage_max:5,duration:16}],this._citisId={1:"\u041c\u043e\u0441\u043a\u0432\u0430",2:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",3:"\u041f\u0430\u0440\u0438\u0436",4:"\u041b\u043e\u043d\u0434\u043e\u043d",5:"\u0412\u0430\u0448\u0438\u043d\u0433\u0442\u043e\u043d",6:"\u041e\u0442\u0442\u0430\u0432\u0430"},this.delay=function(e){return new Promise(function(t,a){setTimeout(t,e)})},this.findTickets=function(e){var a=e.cityFromId,n=e.cityToId,r=e.weight,i={},c=t._citisId[parseInt(a)],l=t._citisId[parseInt(n)];return t._tickets.forEach(function(e){e.from===c&&e.to===l&&e.laggage_max>=r&&(i[e.id]=e)}),i}},p=Object(l.b)(function(e){return{cityToId:e.filter.cityToId,cityFromId:e.filter.cityFromId,weight:e.filter.weight}},function(e){return{loadingEnd:function(t){return e({type:"LOADING_END",findTickets:t})},loadingStart:function(){return e({type:"LOADING_START"})},onFindTicketsError:function(){return e({type:"ERROR"})}}})(function(e){var t=e.cityToId,a=e.cityFromId,n=e.weight,i=e.loadingStart,c=e.loadingEnd,l=e.onFindTicketsError;if(t>0&&a>0&&n>0){i();var o=new k;o.delay(1e3).then(function(){return o.findTickets({cityToId:t,cityFromId:a,weight:n})},l).then(function(e){c(e)})}return r.a.createElement("header",{className:"search-form"},r.a.createElement(E,null),r.a.createElement(g,null))}),I=(a(33),function(e){var t=e.split(" ")[1];return t.search(/^\d:/)>-1&&(t="0".concat(t)),t}),v=function(e){return e.split(" ")[0].replace(/-/g,".")},_=function(e){return e.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")},T=function(e){e.id;var t=e.from,a=e.to,n=e.price,i=e.duration,c=e.time_arrival,l=e.time_departure;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"from-info"},r.a.createElement("span",{className:"from-info-time"},I(l)),r.a.createElement("span",{className:"from-info-date"},t,r.a.createElement("br",null),v(l))),r.a.createElement("div",{className:"ticket-info-price"},r.a.createElement("span",{className:"duration"},i,"\u0447"),r.a.createElement("span",{className:"price"},_(n)," \u0440")),r.a.createElement("div",{className:"to-info"},r.a.createElement("span",{className:"to-info-time"},I(c)),r.a.createElement("span",{className:"to-info-date"},a,r.a.createElement("p",null,v(c)))))},b=(a(34),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{id:"preloader"}),r.a.createElement("div",{id:"loader"}))}),y=(a(35),Object(l.b)(function(e){return{findTickets:e.findTickets,loading:e.loading,ticketsInBasket:e.ticketsInBasket,error:e.error,ticketsInBasketCount:e.ticketsInBasketCount}},function(e){return{ticketClick:function(t){return e(function(e){var t=Object(f.a)({},e.currentTarget.dataset);return e.currentTarget.classList.toggle("in-basket"),{type:"TICKET_CLICK",ticketData:t}}(t))}}})(function(e){var t=e.findTickets,a=e.loading,n=e.ticketClick,i=e.ticketsInBasket,c=e.error;if(a)return r.a.createElement(b,null);if(!t||c)return r.a.createElement("div",{className:"not-found-tickets"},"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0438\u0441\u043a\u0435 \u0431\u0438\u043b\u0435\u0442\u043e\u0432");if(0===Object.keys(t).length)return r.a.createElement("div",{className:"not-found-tickets"},"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0431\u0438\u043b\u0435\u0442\u043e\u0432");var l=[];for(var o in t){var s=t[o],u=s.id,m=s.price,d=s.to,f=s.from,E="ticket";E+=u in i?" in-basket":"",l.push(r.a.createElement("div",{key:u,className:E,"data-id":u,"data-price":m,"data-to":d,"data-from":f,onClick:n},r.a.createElement(T,t[o])))}return r.a.createElement("div",{className:"tickets"},l)})),C=(a(36),Object(l.b)(function(e){return{ticketsInBasket:e.ticketsInBasket,ticketsInBasketCount:e.ticketsInBasketCount}},function(e){return{buyButtonClick:function(){return e({type:"BUY_TICKETS"})},ticketInBasketClick:function(t){return e(function(e){var t=e.currentTarget.dataset.id;return e.currentTarget.classList.toggle("in-basket"),{type:"TICKET_IN_BASKET_CLICK",id:t}}(t))}}})(function(e){var t=e.ticketsInBasket,a=e.ticketsInBasketCount,n=e.buyButtonClick,i=e.ticketInBasketClick;if(0===a)return r.a.createElement("div",{className:"empty-basket"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430");var c=[];for(var l in t){var o=t[l],s=o.id,u=o.from,m=o.to,d=o.price;c.push(r.a.createElement("div",{className:"ticket-in-basket",key:s,"data-id":s,onClick:i},r.a.createElement("div",{className:"cities"},r.a.createElement("span",{className:"cities-from"},u)," ",r.a.createElement("span",{className:"cities-to"},m)," ",r.a.createElement("br",null)),r.a.createElement("div",{className:"summ"},r.a.createElement("span",{className:"ticket-important-info"},"2")," \u0431\u0438\u043b\u0435\u0442\u0430 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 ",r.a.createElement("span",{className:"ticket-important-info"},_(2*d)))))}return r.a.createElement("div",{className:"basket"},r.a.createElement("div",{className:"tickets-in-basket"},c),r.a.createElement("button",{type:"button",className:"btn btn-primary basket-buy-button",onClick:n},"\u041a\u0443\u043f\u0438\u0442\u044c"))})),N=(a(37),Object(l.b)(function(e){return{cityToId:e.filter.cityToId,cityFromId:e.filter.cityFromId}})(function(e){var t=e.cityToId,a=e.cityFromId;return null===t||null===a?r.a.createElement("main",null,r.a.createElement("div",{className:"empty-content-block"},"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a \u0431\u0438\u043b\u0435\u0442\u043e\u0432")):r.a.createElement("main",null,r.a.createElement(y,null),r.a.createElement(C,null))})),h=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p,null),r.a.createElement(N,null))}}]),t}(n.Component),O=a(1),B=function(e,t){if(void 0===e)return{findTickets:{},ticketsInBasket:{},ticketsInBasketCount:0,filter:{cityToId:null,cityFromId:null,weight:6},loading:!1,error:!1};switch(t.type){case"CITY_TO_FORM_SELECTED":var a=Object(O.a)({},e);return a.filter.cityToId=t.cityToId,a;case"CITY_FROM_FORM_SELECTED":var n=Object(O.a)({},e);return n.filter.cityFromId=t.cityFromId,n;case"BAGGAGE_WEIGHT_INC":var r=Object(O.a)({},e);return r.filter.weight=e.filter.weight+1,r;case"BAGGAGE_WEIGHT_DEC":var i=Object(O.a)({},e);return i.filter.weight=e.filter.weight-1,i;case"LOADING_END":var c=Object(O.a)({},e);return c.findTickets=t.findTickets,c.loading=!1,c.error=!1,c;case"LOADING_START":var l=Object(O.a)({},e);return l.loading=!0,l;case"TICKET_CLICK":var o=Object(O.a)({},e);return o.ticketsInBasket[t.ticketData.id]?(delete o.ticketsInBasket[t.ticketData.id],o.ticketsInBasketCount-=1):(o.ticketsInBasket[t.ticketData.id]=t.ticketData,o.ticketsInBasketCount+=1),o;case"TICKET_IN_BASKET_CLICK":var s=Object(O.a)({},e);return delete s.ticketsInBasket[t.id],s.ticketsInBasketCount-=1,s;case"ERROR":var u=Object(O.a)({},e);return u.error=!0,u;case"BUY_TICKETS":if(0===e.ticketsInBasketCount)return e;var m=e.ticketsInBasket;return console.log("\u0414\u0430\u043d\u043d\u044b\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440: ".concat(JSON.stringify(m))),e;default:return e}},F=a(7),w=Object(F.b)(B);c.a.render(r.a.createElement(l.a,{store:w},r.a.createElement(h,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.48b1a4b2.chunk.js.map